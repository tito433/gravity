<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gravity visualization</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <script src="js/index.js"></script>
</head>
<body>
  <header>
    <h1>The gravity</h1>
    <div id="menu">
      <input type="checkbox" checked="checked" class="nav-trigger" id="nav-trigger"/>
      <label for="nav-trigger"><span></span></label>
      <nav>
        <ul id="settings" class="list">
          <li>
            <p>Pulse</p>
            <div class="input-group">
              <input type="number" name="pulse" class="form-control" value="100" />
              <span class="input-group-addon">ms</span>
            </div>
          </li>
          <li>
            <p>Distance</p>
            <div class="input-group">
              <input type="number" name="distance" class="form-control" value="10" />
              <span class="input-group-addon"><a href="https://simple.wikipedia.org/wiki/Astronomical_unit">AU</a></span>
            </div>
          </li>
          <li>
            <p>Mass</p>
            <div class="input-group" style="width: 130px">
              <input type="number" name="mass" class="form-control" value="59.736" />
              <span class="input-group-addon">Ã—10<sup>23</sup> kg</span>
            </div>
          </li>
        </ul>
        <fieldset>
          <legend>Create:</legend>
          <buttongroup>
            <button name="createSolar">Solar</button>
            <button name="createRandsMass">Random</button>
          </buttongroup>
        </fieldset>
        <fieldset>
          <legend>Controll:</legend>
          <buttongroup>
            <button id="start">START</button>
            <button id="move">STEP</button>
            <button id="reset">RESET</button>
          </buttongroup>
        </fieldset>
      </nav>
    </div>
  </header>
  <section id="output">
    <canvas>Your browser doesn't support canvas!</canvas>
  </div>
<script type="text/javascript">
  window.onload=function(){
    var settings={};
    var gravity={};

    document.querySelectorAll('#settings input').forEach(function(element, index) {
        settings[element.name]=element.value;
        element.onchange=function(e){
          var name=e.target.name,value=e.target.value;
          gravity.settings(name,value);
        }
    });

    gravity=new Gravity(document.getElementById('output'),settings);
    
    document.getElementById('menu').querySelectorAll('button').forEach(function(element, index) {
        var fn=element.name;
        if(fn && typeof gravity[fn] === 'function'){
          element.onclick=gravity[fn].bind(gravity);
        }
    });
    document.getElementById('start').onclick=function(e){
      var state=e.target.innerHTML;
      e.target.innerHTML=state==='START'?'STOP':'START';
      gravity.start();
    }
    document.getElementById('move').onclick=gravity.move.bind(gravity);
    document.getElementById('reset').onclick=gravity.reset.bind(gravity);
  }
</script>
</body>
</html>